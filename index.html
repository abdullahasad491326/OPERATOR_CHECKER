<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Operator Lookup</title>  <!-- Updated to include additional request headers that are actually allowed
       from browser JavaScript. Forbidden headers (Host, Origin, User‚ÄëAgent, sec-*)
       are automatically added by the browser and cannot be overridden. ‚Üí 2025‚Äë07‚Äë05 -->  <style>
    :root{--radius:1.25rem;--indigo:#6366f1;--violet:#8b5cf6;--pink:#ec4899;--bg:linear-gradient(135deg,var(--indigo),var(--pink));--slate-900:#0f172a}
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    body{min-height:100dvh;display:grid;place-items:center;padding:2dvh;background:var(--bg);transition:background .8s linear;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;color:var(--slate-900)}
    .card{width:90%;max-width:420px;padding:2rem 2.25rem;background:rgba(255,255,255,.85);backdrop-filter:blur(14px)saturate(180%);border-radius:var(--radius);box-shadow:0 20px 30px rgba(0,0,0,.15);text-align:center}
    h1{font-size:1.6rem;margin-bottom:1rem;font-weight:700}
    input[type=tel]{width:100%;padding:.9rem 1.05rem;font-size:1rem;border-radius:var(--radius);border:2px solid #e5e7eb;transition:border .25s}
    input:focus{outline:none;border-color:var(--indigo)}
    .btn{margin-top:1rem;width:100%;padding:.9rem 1.05rem;font-size:1rem;font-weight:600;border:none;border-radius:var(--radius);color:#fff;cursor:pointer;background:linear-gradient(135deg,var(--indigo),var(--violet));transition:opacity .25s,transform .25s}
    .btn:hover{transform:translateY(-2px)}.btn:disabled{opacity:.6;cursor:not-allowed;transform:none}
    .btn.loading{position:relative;color:transparent !important}
    .btn.loading::after{content:"";position:absolute;top:50%;left:50%;width:20px;height:20px;margin:-10px;border-radius:50%;border:3px solid #fff;border-top-color:transparent;animation:spin .8s linear infinite}
    @keyframes spin{to{transform:rotate(1turn)}}
    .result-box{margin-top:1.5rem;text-align:left;font-size:.95rem;border-left:6px solid var(--indigo);padding:1rem 1.25rem;border-radius:calc(var(--radius) - 4px);background:#fafafa;box-shadow:inset 0 1px 2px rgba(0,0,0,.05);word-break:break-word;display:none}
    .result-box.error{border-left-color:#dc2626;color:#dc2626}
    .result-box p{margin:.35rem 0}
  </style></head>
<body>
  <main class="card">
    <h1>üì≤ Operator Lookup</h1>
    <input id="msisdn" type="tel" inputmode="numeric" placeholder="Enter MSISDN (e.g. 923001234567)" autocomplete="off" />
    <button id="searchBtn" class="btn">Search</button>
    <section id="resultBox" class="result-box"></section>
  </main>  <script>
    // Gradient rotation
    const grads=[
      'linear-gradient(135deg,#6366f1,#ec4899)',
      'linear-gradient(135deg,#ef4444,#f97316)',
      'linear-gradient(135deg,#14b8a6,#06b6d4)',
      'linear-gradient(135deg,#a855f7,#ec4899)',
      'linear-gradient(135deg,#10b981,#3b82f6)'];
    let gi=0;setInterval(()=>{gi=(gi+1)%grads.length;document.documentElement.style.setProperty('--bg',grads[gi]);},1000);

    // DOM
    const input=document.getElementById('msisdn');
    const btn=document.getElementById('searchBtn');
    const box=document.getElementById('resultBox');
    input.addEventListener('keyup',e=>e.key==='Enter'&&lookup());btn.addEventListener('click',lookup);

    function setL(v){v?btn.classList.add('loading'):btn.classList.remove('loading');btn.disabled=v}
    function showErr(msg){box.textContent=msg;box.classList.add('error');box.style.display='block'}

    async function lookup(){
      const msisdn=input.value.trim();
      if(!/^\d{6,15}$/.test(msisdn))return showErr('‚ùå Enter a valid number');
      setL(true);box.style.display='none';

      const gql={
        variables:{input:{msisdns:msisdn}},
        operationName:'OperatorLookup',
        query:`mutation OperatorLookup($input: OperatorLookupInput!) { availability { operatorLookup(input: $input) { operators { operator { name countryId logoUrl } } } } }`
      };

      try{
        const res=await fetch('https://prod-mp.rebtel.com/graphql',{
          method:'POST',
          headers:{
            'Content-Type':'application/json; charset=UTF-8',
            'Accept':'application/json, text/javascript, */*; q=0.01',
            'Accept-Language':'en',
            'Authorization':'application 7443a5f6-01a7-4ce7-8e87-c36212fad4f5',
            'X-Requested-With':'mark.via.gp',
            'X-Timestamp':new Date().toISOString()
          },
          body:JSON.stringify(gql)
        });
        if(!res.ok)throw new Error(res.status);
        const data=await res.json();
        const op=data?.data?.availability?.operatorLookup?.operators?.[0]?.operator;
        if(op){
          const now=new Date().toLocaleString('en-PK',{timeZone:'Asia/Karachi'});
          box.innerHTML=`<p><strong>üì° Operator:</strong> ${op.name}</p><p><strong>üåç Country:</strong> ${op.countryId}</p><p><strong>üïí Time:</strong> ${now}</p><p><strong>üë®‚Äçüíª Developer:</strong> @CYBEREXPERTPK</p>`;
          box.classList.remove('error');box.style.display='block';
        }else showErr('‚ùå Invalid or unsupported number');
      }catch(e){showErr('‚ö†Ô∏è Network/CORS error');}
      finally{setL(false);}
    }
  </script></body>
</html>
